{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}
{% block content %}
    <main class="container">

        <div class="welcome-banner">
            <h2>üçâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä "–ë–µ–∑—É–º–Ω—ã–µ –∞—Ä–±—É–∑—ã"! üçâ</h2>
            <p>
                –≠—Ç–æ –∑–∞–∫—Ä—ã—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Å–∞–π—Ç, –¥–µ–ª–∏—Ç–µ—Å—å —Å–ø–ª–µ—Ç–Ω—è–º–∏, –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∫–≤–µ—Å—Ç—ã!
                –ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å –æ—à–∏–±–∫–æ–π –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, 
                <a href="{{ url_for('report_bug') }}">—Å–æ–æ–±—â–∏—Ç–µ –Ω–∞–º</a>. –í–∞—à–∞ –ø–æ–º–æ—â—å –Ω–µ–æ—Ü–µ–Ω–∏–º–∞!
            </p>
        </div>

        {% if pinned_gossip %}
        <div class="pinned-gossip-card">
            <h3><i class="fas fa-thumbtack"></i> –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–∞—è —Å–ø–ª–µ—Ç–Ω—è</h3>
            <div class="gossip-card">
                <div class="gossip-header">
                    <h2 class="gossip-title"><a href="{{ url_for('gossip', gossip_id=pinned_gossip.id) }}">{{ pinned_gossip.title }}</a></h2>
                    <div class="gossip-meta">
                        <span class="gossip-author">–æ—Ç <a href="{{ url_for('profile', username=pinned_gossip.author.username) }}">{{ pinned_gossip.author.username }}</a></span>
                        <time class="gossip-date" datetime="{{ pinned_gossip.date_posted.isoformat() }}Z">{{ pinned_gossip.date_posted.strftime('%Y-%m-%d %H:%M') }}</time>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="featured-sections">
            {% if best_of_week %}
            <div class="featured-section-card">
                <h3 class="section-subtitle">–õ—É—á—à–µ–µ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                <ul class="featured-list">
                    {% for gossip in best_of_week %}
                    <li><a href="{{ url_for('gossip', gossip_id=gossip.id) }}">{{ gossip.title }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if from_verified %}
            <div class="featured-section-card">
                <h3 class="section-subtitle">–û—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö</h3>
                <ul class="featured-list">
                    {% for gossip in from_verified %}
                    <li><a href="{{ url_for('gossip', gossip_id=gossip.id) }}">{{ gossip.title }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if trending %}
            <div class="featured-section-card">
                <h3 class="section-subtitle">–í —Ç—Ä–µ–Ω–¥–µ</h3>
                <ul class="featured-list">
                    {% for gossip in trending %}
                    <li><a href="{{ url_for('gossip', gossip_id=gossip.id) }}">{{ gossip.title }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>

        <div class="gossip-feed">
            <h3 class="section-subtitle">–ù–æ–≤—ã–µ —Å–ø–ª–µ—Ç–Ω–∏</h3>
            <section class="main-feed">
                {% for gossip in gossips.items %}
                <article class="gossip-card" id="gossip-{{ gossip.id }}">
                    <div class="gossip-author-info {% if gossip.author.active_decoration %}{{ gossip.author.active_decoration.css_class }}{% endif %}">
                        {% if gossip.author.active_decoration and 'flaming' in gossip.author.active_decoration.css_class %}
                            <div class="particle-container">
                                {% for i in range(1, 11) %}<span class="spark spark-{{ i }}"></span>{% endfor %}
                            </div>
                        {% endif %}
                        {% if gossip.author.active_decoration and ('verified' in gossip.author.active_decoration.css_class or 'moderator' in gossip.author.active_decoration.css_class) %}
                            <div class="particle-container">
                                {% for i in range(1, 11) %}<span class="particle particle-{{ i }}"></span>{% endfor %}
                            </div>
                        {% endif %}
                        <a href="{{ url_for('profile', username=gossip.author.username) }}" class="gossip-author-link">
                             <div class="author-details">
                                <h3 class="gossip-author-name">{{ gossip.author.username }}</h3>
                                <p class="gossip-author-bio">{{ gossip.author.bio }}</p>
                            </div>
                        </a>
                    </div>
                    <h2 class="gossip-title"><a href="{{ url_for('gossip', gossip_id=gossip.id) }}">{{ gossip.title }}</a></h2>
                    <div class="gossip-meta">
                        <span class="gossip-author">
                            <a href="{{ url_for('profile', username=gossip.author.username) }}">{{ gossip.author.username }}</a>
                        </span>
                        <time datetime="{{ gossip.date_posted.isoformat() }}Z">{{ gossip.date_posted.strftime('%Y-%m-%d %H:%M') }}</time>
                    </div>
                    <p class="gossip-content-preview">{{ gossip.content[:250] }}{% if gossip.content|length > 250 %}...{% endif %}</p>
                    <div class="gossip-footer">
                        <div class="gossip-stats">
                            <span><i class="fas fa-heart"></i> {{ gossip.likes|length }}</span>
                            <span><i class="fas fa-comment"></i> {{ gossip.comments|length }}</span>
                        </div>
                        <a href="{{ url_for('gossip', gossip_id=gossip.id) }}" class="btn btn-secondary">–û—Ç–∫—Ä—ã—Ç—å</a>
                    </div>
                </article>
            {% endfor %}
        </section>
        </div>

    <nav class="pagination">
        {% if gossips.has_prev %}
            <a href="{{ url_for('home', page=gossips.prev_num) }}" class="btn btn-secondary">&laquo; –ù–æ–≤–µ–µ</a>
        {% endif %}
        {% if gossips.has_next %}
            <a href="{{ url_for('home', page=gossips.next_num) }}" class="btn btn-secondary">–°—Ç–∞—Ä–µ–µ &raquo;</a>
        {% endif %}
    </nav>
{% endblock %}
